<launch>
  <!-- GMapping for 4 robots -->
  <include file="$(find limo_bringup)/launch/gmapping_single.launch">
    <arg name="robot_namespace" value="robot1"/>
  </include>

  <include file="$(find limo_bringup)/launch/gmapping_single.launch">
    <arg name="robot_namespace" value="robot2"/>
  </include>

  <include file="$(find limo_bringup)/launch/gmapping_single.launch">
    <arg name="robot_namespace" value="robot3"/>
  </include>

  <include file="$(find limo_bringup)/launch/gmapping_single.launch">
    <arg name="robot_namespace" value="robot4"/>
  </include>
  <rosparam file="$(find limo_bringup)/param/robot_init_poses.yaml" command="load"/>

  <!-- Merge maps from all robots -->
  <node pkg="multirobot_map_merge" type="map_merge" name="map_merge" output="screen">
    <param name="known_init_poses" value="true"/>
    <param name="world_frame" value="world"/>
    <param name="merged_map_topic" value="/map"/>
    <param name="robot_map_topic" value="map"/>
    <param name="robot_namespace" value="robot"/>
  </node>

  <!-- RViz -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find limo_bringup)/rviz/gmapping.rviz"/>
</launch>
